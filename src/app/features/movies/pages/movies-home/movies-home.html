<div class="movies-home-page">
  <!-- Hero Banner -->
  <section class="hero-banner" *ngIf="featuredMovies.length">
    <div class="hero-slider">
      <div 
        class="hero-slide"
        *ngFor="let movie of featuredMovies; let i = index"
        [class.active]="currentSlide === i">
        
        <div class="hero-backdrop">
          <img 
            [src]="getBackdropUrl(movie)"
            [alt]="movie.title"
            loading="lazy">
          <div class="hero-overlay"></div>
        </div>

        <div class="hero-content">
          <div class="container-fluid px-3 px-md-4 px-lg-5">
            <div class="row">
              <div class="col-12 col-lg-8 col-xl-7">
                <div class="hero-info">
                  <div class="hero-meta d-flex flex-wrap gap-2 gap-md-3 mb-3">
                    <span class="hero-year" *ngIf="movie.release_date">
                      {{ getYear(movie.release_date) }}
                    </span>
                    <span class="hero-rating" *ngIf="movie.vote_average">
                      {{ movie.vote_average.toFixed(1) }} ‚≠ê
                    </span>
                    <div class="hero-genres" *ngIf="movie.genres?.length">
                      <span *ngFor="let genre of movie.genres?.slice(0, 3); let last = last">
                        {{ genre }}<span *ngIf="!last"> ‚Ä¢ </span>
                      </span>
                    </div>
                  </div>

                  <h1 class="hero-title mb-3 mb-md-4">{{ movie.title }}</h1>
                  
                  <p class="hero-description mb-4 d-none d-md-block" *ngIf="movie.overview">
                    {{ movie.overview | slice:0:180 }}
                    <span *ngIf="movie.overview.length > 180">...</span>
                  </p>

                  <div class="hero-actions d-flex flex-column flex-sm-row gap-2 gap-md-3">
                    <button 
                      class="btn btn-primary hero-btn d-flex align-items-center justify-content-center gap-2"
                      (click)="onMovieClick(movie)">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                      </svg>
                      Ver Detalhes
                    </button>

                    <button 
                      class="btn btn-outline-light hero-btn d-flex align-items-center justify-content-center gap-2"
                      (click)="onAddToWatchlist(movie)">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                      </svg>
                      Favoritar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Slider Controls -->
    <div class="hero-controls" *ngIf="featuredMovies.length > 1">
      <div class="container-fluid px-3 px-md-4 px-lg-5">
        <div class="d-flex justify-content-between align-items-center">
          <div class="slider-indicators d-flex gap-2">
            <button
              *ngFor="let movie of featuredMovies; let i = index"
              class="indicator"
              [class.active]="currentSlide === i"
              (click)="setCurrentSlide(i)"
              [attr.aria-label]="'Ir para slide ' + (i + 1)">
            </button>
          </div>
          
          <div class="slider-nav d-flex gap-2">
            <button 
              class="btn btn-sm btn-outline-light nav-btn"
              (click)="previousSlide()">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
              </svg>
            </button>
            
            <button 
              class="btn btn-sm btn-outline-light nav-btn"
              (click)="nextSlide()">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Search Section -->
  <section class="search-section py-4 py-md-5">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-8">
          <div class="search-content text-center">
            <h2 class="search-title h3 h2-md mb-2 mb-md-3">Encontre seu pr√≥ximo filme favorito</h2>
            <p class="search-subtitle text-muted mb-4">Milhares de filmes esperando para serem descobertos</p>
            
            <div class="search-wrapper">
              <app-search-bar
                placeholder="Digite o nome de um filme, ator ou diretor..."
                [showFilters]="true"
                (search)="onSearch($event)"
                (filterToggle)="toggleFilters()">
              </app-search-bar>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Filter Panel -->
  <app-movie-filter
    [isOpen]="showFilters"
    [genres]="genres"
    [initialFilters]="activeFilters"
    (filtersChange)="onFiltersChange($event)"
    (clearFilters)="onClearFilters()"
    (close)="toggleFilters()">
  </app-movie-filter>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      
      <!-- Popular Movies Section -->
      <section class="movies-section popular-section mb-4 mb-md-5">
        <div class="section-header d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-3 mb-md-4 gap-2">
          <div class="section-title-group">
            <h2 class="section-title h4 h3-md mb-1">Populares</h2>
            <p class="section-subtitle small text-muted mb-0 d-none d-sm-block">Os filmes mais assistidos do momento</p>
          </div>
          <button 
            class="view-all-btn"
            (click)="navigateToSection('popular')">
            <span>Ver todos</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>

        <!-- Loading State -->
        <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 row-cols-xl-6 g-2 g-md-3" *ngIf="loadingPopular">
          <div class="col" *ngFor="let item of [1,2,3,4,5,6]">
            <div class="loading-card placeholder-glow">
              <div class="placeholder col-12" style="height: 300px; border-radius: 0.5rem;"></div>
            </div>
          </div>
        </div>

        <!-- Movies Scroll -->
        <div class="movies-scroll position-relative" *ngIf="!loadingPopular && popularMovies.length">
          <div class="scroll-container d-flex gap-2 gap-md-3 overflow-auto pb-2" #popularScrollContainer (scroll)="onScrollChange($event)">
            <app-movie-card
              *ngFor="let movie of popularMovies; trackBy: trackByMovieId"
              [movie]="movie"
              size="medium"
              class="flex-shrink-0 movie-card-item"
              (movieClick)="onMovieClick($event)"
              (addToWatchlist)="onAddToWatchlist($event)">
            </app-movie-card>
          </div>
          
          <!-- Scroll Navigation -->
          <button 
            class="scroll-btn scroll-prev d-none d-md-flex"
            (click)="scrollLeft(popularScrollContainer)"
            [class.hidden]="!canScrollLeft(popularScrollContainer)"
            [disabled]="!canScrollLeft(popularScrollContainer)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
          </button>
          
          <button 
            class="scroll-btn scroll-next d-none d-md-flex"
            (click)="scrollRight(popularScrollContainer)"
            [class.hidden]="!canScrollRight(popularScrollContainer)"
            [disabled]="!canScrollRight(popularScrollContainer)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      </section>

      <!-- Now Playing Section -->
      <section class="movies-section now-playing-section mb-4 mb-md-5">
        <div class="section-header d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-3 mb-md-4 gap-2">
          <div class="section-title-group">
            <h2 class="section-title h4 h3-md mb-1">Em Cartaz</h2>
            <p class="section-subtitle small text-muted mb-0 d-none d-sm-block">Filmes dispon√≠veis nos cinemas</p>
          </div>
          <button 
            class="view-all-btn"
            (click)="navigateToSection('now-playing')">
            <span>Ver todos</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>

        <!-- Loading State -->
        <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 row-cols-xl-6 g-2 g-md-3" *ngIf="loadingNowPlaying">
          <div class="col" *ngFor="let item of [1,2,3,4,5,6]">
            <div class="loading-card placeholder-glow">
              <div class="placeholder col-12" style="height: 300px; border-radius: 0.5rem;"></div>
            </div>
          </div>
        </div>

        <!-- Movies Scroll -->
        <div class="movies-scroll position-relative" *ngIf="!loadingNowPlaying && nowPlayingMovies.length">
          <div class="scroll-container d-flex gap-2 gap-md-3 overflow-auto pb-2" #nowPlayingScrollContainer (scroll)="onScrollChange($event)">
            <app-movie-card
              *ngFor="let movie of nowPlayingMovies; trackBy: trackByMovieId"
              [movie]="movie"
              size="medium"
              class="flex-shrink-0 movie-card-item"
              (movieClick)="onMovieClick($event)"
              (addToWatchlist)="onAddToWatchlist($event)">
            </app-movie-card>
          </div>
          
          <!-- Scroll Navigation -->
          <button 
            class="scroll-btn scroll-prev d-none d-md-flex"
            (click)="scrollLeft(nowPlayingScrollContainer)"
            [class.hidden]="!canScrollLeft(nowPlayingScrollContainer)"
            [disabled]="!canScrollLeft(nowPlayingScrollContainer)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
          </button>
          
          <button 
            class="scroll-btn scroll-next d-none d-md-flex"
            (click)="scrollRight(nowPlayingScrollContainer)"
            [class.hidden]="!canScrollRight(nowPlayingScrollContainer)"
            [disabled]="!canScrollRight(nowPlayingScrollContainer)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      </section>

      <!-- Upcoming Movies Section -->
      <section class="movies-section upcoming-section mb-4 mb-md-5">
        <div class="section-header d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-3 mb-md-4 gap-2">
          <div class="section-title-group">
            <h2 class="section-title h4 h3-md mb-1">Em Breve</h2>
            <p class="section-subtitle small text-muted mb-0 d-none d-sm-block">Pr√≥ximos lan√ßamentos imperd√≠veis</p>
          </div>
          <button 
            class="view-all-btn"
            (click)="navigateToSection('upcoming')">
            <span>Ver todos</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>

        <!-- Loading State -->
        <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 row-cols-xl-6 g-2 g-md-3" *ngIf="loadingUpcoming">
          <div class="col" *ngFor="let item of [1,2,3,4,5,6]">
            <div class="loading-card placeholder-glow">
              <div class="placeholder col-12" style="height: 300px; border-radius: 0.5rem;"></div>
            </div>
          </div>
        </div>

        <!-- Movies Scroll -->
        <div class="movies-scroll position-relative" *ngIf="!loadingUpcoming && upcomingMovies.length">
          <div class="scroll-container d-flex gap-2 gap-md-3 overflow-auto pb-2" #upcomingScrollContainer>
            <app-movie-card
              *ngFor="let movie of upcomingMovies; trackBy: trackByMovieId"
              [movie]="movie"
              size="medium"
              class="flex-shrink-0 movie-card-item"
              (movieClick)="onMovieClick($event)"
              (addToWatchlist)="onAddToWatchlist($event)">
            </app-movie-card>
          </div>
          
          <!-- Scroll Navigation -->
          <button 
            class="scroll-btn scroll-prev d-none d-md-flex"
            (click)="scrollLeft(upcomingScrollContainer)"
            [class.hidden]="!canScrollLeft(upcomingScrollContainer)"
            [disabled]="!canScrollLeft(upcomingScrollContainer)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
          </button>
          
          <button 
            class="scroll-btn scroll-next d-none d-md-flex"
            (click)="scrollRight(upcomingScrollContainer)"
            [class.hidden]="!canScrollRight(upcomingScrollContainer)"
            [disabled]="!canScrollRight(upcomingScrollContainer)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      </section>

      <!-- Top Rated Section -->
      <section class="movies-section top-rated-section">
        <div class="section-header">
          <div class="section-title-group">
            <h2 class="section-title">Melhores Avaliados</h2>
            <p class="section-subtitle">Filmes com as melhores notas da cr√≠tica</p>
          </div>
          <button 
            class="view-all-btn"
            (click)="navigateToSection('top-rated')">
            <span>Ver todos</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>

        <!-- Loading State -->
        <div class="movies-loading" *ngIf="loadingTopRated">
          <div class="loading-card" *ngFor="let item of [1,2,3,4,5,6]"></div>
        </div>

        <!-- Movies Scroll -->
        <div class="movies-scroll position-relative" *ngIf="!loadingTopRated && topRatedMovies.length">
          <div class="scroll-container d-flex gap-2 gap-md-3 overflow-auto pb-2" #topRatedScrollContainer>
            <app-movie-card
              *ngFor="let movie of topRatedMovies; trackBy: trackByMovieId"
              [movie]="movie"
              size="medium"
              class="flex-shrink-0 movie-card-item"
              (movieClick)="onMovieClick($event)"
              (addToWatchlist)="onAddToWatchlist($event)">
            </app-movie-card>
          </div>
          
          <!-- Scroll Navigation -->
          <button 
            class="scroll-btn scroll-prev"
            (click)="scrollLeft(topRatedScrollContainer)"
            [class.hidden]="!canScrollLeft(topRatedScrollContainer)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
          </button>
          
          <button 
            class="scroll-btn scroll-next"
            (click)="scrollRight(topRatedScrollContainer)"
            [class.hidden]="!canScrollRight(topRatedScrollContainer)">
            <svg xmlns="http://www.w3.js.org" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      </section>

      <!-- Browse by Genre -->
      <section class="genres-section" *ngIf="genres.length">
        <div class="section-header">
          <div class="section-title-group">
            <h2 class="section-title">Explorar por G√™nero</h2>
            <p class="section-subtitle">Encontre filmes do seu g√™nero favorito</p>
          </div>
        </div>

        <div class="genres-grid">
          <button 
            *ngFor="let genre of genres.slice(0, 12)"
            class="genre-card"
            (click)="onFiltersChange({ genre: genre.id })">
            <div class="genre-content">
              <span class="genre-name">{{ genre.name }}</span>
              <div class="genre-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </div>
            </div>
          </button>
        </div>
      </section>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="!isLoading && !hasAnyContent">
        <div class="empty-content">
          <div class="empty-icon">üé¨</div>
          <h3 class="empty-title">Nenhum filme dispon√≠vel</h3>
          <p class="empty-description">
            N√£o foi poss√≠vel carregar os filmes no momento. 
            Verifique sua conex√£o e tente novamente.
          </p>
          <button class="btn btn-primary" (click)="loadAllSections()">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
            Tentar Novamente
          </button>
        </div>
      </div>

    </div>
  </main>
</div>