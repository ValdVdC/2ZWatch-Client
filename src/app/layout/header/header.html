<header class="header">
  <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
    <div class="container-fluid px-3 px-lg-4">
      <!-- Logo -->
      <a href="/" class="navbar-brand d-flex align-items-center">
        <span class="brand-text">2Z&Watch</span>
      </a>

      <!-- Mobile menu toggle -->
      <button 
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
        (click)="toggleMenu()">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Navigation menu -->
      <div class="collapse navbar-collapse" id="navbarNav" [class.show]="isMenuOpen">
        <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item">
            <a routerLink="" 
               routerLinkActive="active" 
               [routerLinkActiveOptions]="{exact: true}"
               (click)="closeMenu(); scrollToSection('hero')" 
               class="nav-link">
              Início
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/movies" 
               routerLinkActive="active"
               (click)="closeMenu()" 
               class="nav-link">
              Filmes
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/series" 
               routerLinkActive="active"
               (click)="closeMenu()" 
               class="nav-link">
              Séries
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/explorer" 
               routerLinkActive="active"
               (click)="closeMenu()" 
               class="nav-link">
              <i class="bi bi-compass me-1"></i>Explorar
            </a>
          </li>
          
          <!-- Dropdown para links extras -->
          <li class="nav-item dropdown d-lg-none">
            <a class="nav-link dropdown-toggle" 
               href="#" 
               role="button" 
               data-bs-toggle="dropdown" 
               aria-expanded="false">
              Mais
            </a>
            <ul class="dropdown-menu dropdown-menu-dark">
              <li><a (click)="closeMenu(); scrollToSection('features')" class="dropdown-item">Recursos</a></li>
              <li><a (click)="closeMenu(); scrollToSection('popular')" class="dropdown-item">Popular</a></li>
              <li><a (click)="closeMenu(); scrollToSection('about')" class="dropdown-item">Sobre</a></li>
              <li><a (click)="closeMenu(); scrollToSection('contact')" class="dropdown-item">Contato</a></li>
            </ul>
          </li>

          <!-- Links desktop (escondidos no mobile) -->
          <li class="nav-item d-none d-lg-block">
            <a (click)="scrollToSection('features')" class="nav-link">Recursos</a>
          </li>
          <li class="nav-item d-none d-lg-block">
            <a (click)="scrollToSection('popular')" class="nav-link">Popular</a>
          </li>
          <li class="nav-item d-none d-lg-block">
            <a (click)="scrollToSection('about')" class="nav-link">Sobre</a>
          </li>
          <li class="nav-item d-none d-lg-block">
            <a (click)="scrollToSection('contact')" class="nav-link">Contato</a>
          </li>

          <!-- Auth buttons (se não estiver logado) -->
          <li class="nav-item ms-lg-2" *ngIf="!isAuthenticated">
            <a routerLink="/login" 
               (click)="closeMenu()" 
               class="btn btn-outline-light btn-auth">
              <i class="bi bi-box-arrow-in-right me-1"></i>
              Entrar
            </a>
          </li>
          <li class="nav-item ms-2" *ngIf="!isAuthenticated">
            <a routerLink="/register" 
               (click)="closeMenu()" 
               class="btn btn-primary btn-auth">
              <i class="bi bi-person-plus me-1"></i>
              Cadastrar
            </a>
          </li>

          <!-- User menu (se estiver logado) -->
          <li class="nav-item dropdown ms-lg-2" *ngIf="isAuthenticated">
            <a class="nav-link dropdown-toggle user-dropdown" 
               href="#" 
               role="button" 
               data-bs-toggle="dropdown" 
               aria-expanded="false">
              <img [src]="getAvatarUrl()" 
                   [alt]="currentUser?.username || 'User Avatar'"
                   class="user-avatar me-2" />
              <span>{{ currentUser?.displayName || currentUser?.username }}</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark">
              <li>
                <a routerLink="/account/profile" 
                   (click)="closeMenu()" 
                   class="dropdown-item">
                  <i class="bi bi-person me-2"></i>Perfil
                </a>
              </li>
              <li>
                <a routerLink="/account/favorites" 
                   (click)="closeMenu()" 
                   class="dropdown-item">
                  <i class="bi bi-heart me-2"></i>Favoritos
                </a>
              </li>
              <li>
                <a routerLink="/account/watchlist" 
                   (click)="closeMenu()" 
                   class="dropdown-item">
                  <i class="bi bi-bookmark me-2"></i>Watchlist
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a routerLink="/account/settings" 
                   (click)="closeMenu()" 
                   class="dropdown-item">
                  <i class="bi bi-gear me-2"></i>Configurações
                </a>
              </li>
              <li>
                <a class="dropdown-item" (click)="logout()">
                  <i class="bi bi-box-arrow-right me-2"></i>Sair
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>